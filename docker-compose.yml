mysql:
    image: mysql
    container_name: mysql
    ports:
        - 3306:3306
    environment:
        - MYSQL_ROOT_PASSWORD=root


mongodb:
    image: erangaeb/senzmongodb:0.1
    container_name: senzmongodb
    volumes:
        ['/home/senz/bankz/mongodb:/data/db']
    ports:
        - 27017:27017


switch:
    image: erangaeb/senzswitch:0.53
    container_name: senzswitch
    ports:
        - 7070:7070
    environment:
        - MONGO_HOST=mongodb
        - SWITCH_MODE=PROD
    volumes:
        ['/home/senz/bankz/switch/logs:/app/logs', '/home/senz/bankz/switch/keys:/app/.keys']
    links:
        - mongodb


web:
    image: hpcal1/sdblweb:0.10
    container_name: web
    ports:
        - 3000:3000
    environment:
        - APP_DB_HOST=mysql
        - APP_DB_DATABASE=sdbl
        - RAILS_ENV=production
        - SECRET_KEY_BASE=6534ecca28d582de97251ca2e7a0a3b43a7aed9e0a4be5006ba4088757c72830602053fe047f2e8f30d828ff10def3ba8c9bcc0063e87521a8bc7f300f5a3cdc
    volumes:
        ['/home/senz/bankz/web/logs:/myapp/logs:rw']
    links:
        - mysql


trans:
    image: erangaeb/sdbltrans:1.5
    container_name: trans
    environment:
        - SWITCH_HOST=switch
        - SWITCH_PORT=7070
        - DB_NAME=sdbl
        - MYSQL_HOST=mysql
        - MYSQL_PORT=3306
        - EPIC_HOST=10.100.31.90
        - EPIC_PORT=8200
    volumes:
        ['/home/senz/bankz/trans/logs:/app/logs:rw', '/home/senz/bankz/trans/keys:/app/.keys:rw']
    links:
        - switch
        - mysql
        - web

inq:
    image: erangaeb/sdblinq:1.0
    container_name: inq
    environment:
        - SWITCH_HOST=switch
        - SWITCH_PORT=7070
        - EPIC_HOST=10.100.31.90
        - EPIC_PORT=8200
    volumes:
        ['/home/senz/bankz/inq/logs:/app/logs:rw', '/home/senz/bankz/inq/keys:/app/.keys:rw']
    links:
        - switch


nginx:
    image: erangaeb/senznginx:0.4
    container_name: nginx
    ports:
        - 80:80
        - 443:443
    links:
        - web


dashboard:
    image: hpcal1/senziesdashboard:0.3
    container_name: dashboard
    ports:
        - 4000:4000
    environment:
        - MONGO_HOST=mongodb
        - MONGO_DB=senz
    links:
        - mongodb
